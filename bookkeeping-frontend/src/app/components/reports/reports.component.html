<div class="reports-page">
  <div class="page-header">
    <div>
      <h1>Financial Reports</h1>
      <p class="subtitle">Select a report to open in a new tab</p>
    </div>
  </div>

  <!-- Financial Reports Section -->
  <div class="reports-section">
    <h2 class="section-title">Financial Reports</h2>
    <div class="reports-grid">
      <div *ngFor="let report of getFinancialReports()" 
           class="report-card" 
           (click)="openReport(report)">
        <div class="report-icon" [attr.data-icon]="report.icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path *ngIf="report.icon === 'balance'" d="M12 3v18m0-18l-8 4v10l8 4m0-18l8 4v10l-8 4m-8-4l8-4m0 0l8 4"/>
            <rect *ngIf="report.icon === 'sheet'" x="3" y="3" width="18" height="18" rx="2"/>
            <path *ngIf="report.icon === 'chart'" d="M3 3v18h18M7 16l4-4 4 4 6-6"/>
          </svg>
        </div>
        <h3>{{ report.title }}</h3>
        <p>{{ report.description }}</p>
        <div class="open-indicator">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
            <polyline points="15 3 21 3 21 9"></polyline>
            <line x1="10" y1="14" x2="21" y2="3"></line>
          </svg>
          Open in new tab
        </div>
      </div>
    </div>
  </div>

  <!-- DATEV Export Section -->
  <div class="reports-section">
    <h2 class="section-title">ðŸ‡©ðŸ‡ª DATEV Integration</h2>
    <p class="section-description">Export fÃ¼r deutsche Steuerberater im DATEV-Format</p>
    
    <div class="datev-export-card">
      <div class="datev-header">
        <div class="datev-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14 2 14 8 20 8"></polyline>
            <path d="M12 18v-6m-3 3h6"></path>
          </svg>
        </div>
        <div>
          <h3>DATEV ASCII Export</h3>
          <p>Export Ihrer Buchungsdaten im DATEV-Format fÃ¼r die Ãœbergabe an den Steuerberater</p>
        </div>
      </div>

      <div class="datev-form">
        <div class="form-row">
          <div class="form-group">
            <label>Kontenrahmen</label>
            <select [(ngModel)]="datevFramework" class="datev-select">
              <option value="SKR03">SKR03 - Handelsunternehmen</option>
              <option value="SKR04">SKR04 - Industrieunternehmen</option>
            </select>
          </div>

          <div class="form-group">
            <label>Berater-Nummer</label>
            <input type="number" [(ngModel)]="datevConsultantNumber" class="datev-input" placeholder="1000">
          </div>

          <div class="form-group">
            <label>Mandanten-Nummer</label>
            <input type="number" [(ngModel)]="datevClientNumber" class="datev-input" placeholder="10001">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label>Von Datum</label>
            <input type="date" [(ngModel)]="datevDateFrom" class="datev-input">
          </div>

          <div class="form-group">
            <label>Bis Datum</label>
            <input type="date" [(ngModel)]="datevDateTo" class="datev-input">
          </div>
        </div>

        <div class="datev-actions">
          <button class="btn-secondary" (click)="validateDatevData()">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            Daten validieren
          </button>
          <button class="btn-primary" (click)="exportToDatev()" [disabled]="isExporting">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
            <span *ngIf="!isExporting">DATEV Export</span>
            <span *ngIf="isExporting">Exportiere...</span>
          </button>
        </div>

        <div class="datev-info" *ngIf="datevValidation">
          <div class="info-box" [ngClass]="datevValidation.valid ? 'success' : 'error'">
            <div class="info-icon">{{ datevValidation.valid ? 'âœ“' : 'âš ' }}</div>
            <div class="info-content">
              <strong>{{ datevValidation.valid ? 'Daten sind gÃ¼ltig' : 'Validierungsfehler' }}</strong>
              <div *ngIf="!datevValidation.valid">
                <ul>
                  <li *ngFor="let error of datevValidation.errors">{{ error.error }}</li>
                </ul>
              </div>
              <div *ngIf="datevValidation.valid">
                Bereit fÃ¼r DATEV-Export
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
